name: autodoc-workflow-artifacts

on:
  workflow_run:
    workflows:
      - publish-to-npm
    types:
      - completed

jobs:        
  autoupdate-readme:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v2
        
        - name: Install dependencies
          run: |
            sudo npm i -g autodoc-workflow-artifacts
            autodoc-workflow-artifacts --repo $GITHUB_REPOSITORY --branch $GITHUB_REF --accessToken ${{ secrets.GITHUB_TOKEN }} --inputFilePath ./readme.md

        - uses: stefanzweifel/git-auto-commit-action@v4
          with:
            commit_message: Autodoc workflow artifacts
            branch: ${{ github.head_ref }}
            file_pattern: README.md